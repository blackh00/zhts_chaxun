var Today=new Date,tY=Today.getFullYear(),tM=Today.getMonth(),tD=Today.getDate(),yy=1,Wdate="",jinMM=0,jinDD=0;
$(".bt-text").click(function(){tM=0;tY=$(".Wdate").val().split("-")[0];tM=$(".Wdate").val().split("-")[1];tD=$(".Wdate").val().split("-")[2];$(".Wdate").val().split("-");$(".nub-rls").html(tY+"\u5e74"+(tM+1)+"\u6708");var a=$(".form-input").val();/^[0-9]+$/.test(a)||$("#page1").animate({marginLeft:"-=560px"},800);parseInt(a)>=20&&parseInt(a)<=40&&$("#page1").animate({marginLeft:"-=560px"},800);drawCld1($(".Wdate").val().split("-")[0],tem($(".Wdate").val().split("-")[1]),$(".Wdate").val().split("-")[2],
$(".form-input").val(),"-2");$(".nub-rls").html($(".Wdate").val().split("-")[0]+"\u5e74"+parseInt(tem($(".Wdate").val().split("-")[1]))+"\u6708");jintian(tY,temp(parseInt(tem($(".Wdate").val().split("-")[1]))));tM=parseInt(tem($(".Wdate").val().split("-")[1]))});$(".blacksy").click(function(){$("#page1").animate({marginLeft:"0"},500)});
$(".form-input").blur(function(){var a=$(this).val();a<20||a>40?$(".formtips2").show().html("<b class='tips2'></b>20-40\u5929\u624d\u662f\u6b63\u5e38\u8303\u56f4~ "):$(".formtips2").hide()});$(".next").click(function(){yy=tM++;if(tM>12){tM=1;tY++}drawCld1(tY,tM);$(".nub-rls").html(tY+"\u5e74"+tM+"\u6708");jintian(tY,temp(tM))});$(".prev").click(function(){yy=tM--;if(tM==0){tM=12;tY--}drawCld1(tY,tM);$(".nub-rls").html(tY+"\u5e74"+tM+"\u6708");jintian(tY,temp(tM))});
$(".today").click(function(){var a=new Date;tM=a.getMonth()+1;tY=temp2(a.getYear());drawCld1(tY,a.getMonth()+1);$(".nub-rls").html(tY+"\u5e74"+(a.getMonth()+1)+"\u6708");jintian(tY,temp(a.getMonth()+1))});function jintian(a,b){for(var e=new Date,c=$(".calendar li strong"),f=0;f<c.length;f++){var j=a+""+b+""+temp($(c[f]).html()),g=temp2(e.getYear())+""+temp(e.getMonth()+1)+""+temp(e.getDate());j==g&&$(c[f]).parent().addClass("jin")}}
var solarMonth=[31,28,31,30,31,30,31,31,30,31,30,31],nStr1=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"],Gan=["\u7532","\u4e59","\u4e19","\u4e01","\u620a","\u5df1","\u5e9a","\u8f9b","\u58ec","\u7678"],Zhi=["\u5b50","\u4e11","\u5bc5","\u536f","\u8fb0","\u5df3","\u5348","\u672a","\u7533","\u9149","\u620c","\u4ea5"],sTermInfo=[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,
419210,440795,462224,483532,504758],width="130",offsetx=2,offsety=16,x=0,y=0,show=0,sw=0,cnt=0,dStyle;document.onmousemove=mEvn;function mEvn(a){if(show)if(window.event){x=event.x;y=event.y;if(document.body.scrollLeft){x+=document.body.scrollLeft;y+=document.body.scrollTop}dStyle.left=x+offsetx-width/2+"px";dStyle.top=y+offsety+"px"}else{dStyle.left=a.pageX+offsetx-width/2+"px";dStyle.top=a.pageY+offsety+"px"}}
function calendar(a,b){var e,c,f,j,g=1,k,i=Array(3),o=0;e=new Date(a,b,1);this.length=solarDays(a,b);this.firstWeek=e.getDay();for(var l=0;l<this.length;l++){if(g>0){e=new Date(a,b,l+1);c=new Lunar(e);f=c.year;j=c.month;g=c.day;k=c.isLeap;i[o++]=l-g+1}this[l]=new calElement(a,b+1,l+1,nStr1[(l+this.firstWeek)%7],f,j,g++,k,cyclical(c.yearCyl),cyclical(c.monCyl),cyclical(c.dayCyl++))}sTerm(a,b*2);sTerm(a,b*2+1)}
function sTerm(a,b){return(new Date(3.15569259747E10*(a-1900)+sTermInfo[b]*6E4-22085493E5)).getUTCDate()}function cyclical(a){return Gan[a%10]+Zhi[a%12]}function calElement(a,b,e,c,f,j,g,k,i,o,l){this.isToday=false;this.sYear=a;this.sMonth=b;this.sDay=e;this.week=c;this.lYear=f;this.lMonth=j;this.lDay=g;this.isLeap=k;this.cYear=i;this.cMonth=o;this.cDay=l;this.solarTerms=this.solarFestival=this.lunarFestival=this.color=""}
function Lunar(a){var b,e=new Date(1900,0,31),c=Math.floor((a.getTime()+22064256E5)/864E5);a.getTime();e.getTime();this.dayCyl=c+40;this.monCyl=14;if(c<0){c+=0;b--;this.monCyl-=12}this.year=b;this.yearCyl=b-1864;this.isLeap=false;for(b=1;b<13&&c>0;b++){if(this.isLeap==true&&b==1)this.isLeap=false;c-=0;this.isLeap==false&&this.monCyl++}if(c<0){c+=0;--b;--this.monCyl}this.month=b;this.day=c+1}function solarDays(a,b){return b==1?a%4==0&&a%100!=0||a%400==0?29:28:solarMonth[b]}
function initial(){tY=$(".Wdate").val().split("-")[0];tM=$(".Wdate").val().split("-")[1];tD=$(".Wdate").val().split("-")[2];$(".Wdate").val().split("-");$(".nub-rls").html(tY+"\u5e74"+(tM+1)+"\u6708");drawCld($(".Wdate").val().split("-")[0],tem($(".Wdate").val().split("-")[1]),$(".Wdate").val().split("-")[2],$(".form-input").val(),"-2");$(".nub-rls").html($(".Wdate").val().split("-")[0]+"\u5e74"+parseInt(tem($(".Wdate").val().split("-")[1]))+"\u6708")}
function tem(a){return a>10?a+"":a.replace("0","")}function temp(a){return a>=10?a+"":"0"+a}function temp2(a){return a>1E3?a:1900+a}function toDate(a){a=a.split("-");return new Date(a[0],a[1],a[2])}var d;
function drawCld1(a,b){var e,c;cld=new calendar(a,b-1);var f=1,j="";for(e=0;e<42;e++){c=e-cld.firstWeek;if(c>-1&&c<cld.length){var g=a+""+temp(b)+""+temp(c+1);$(".hide").val($(".form-input").val());var k="";if(e!=0&&(e+1)%7==0)k="bdright ";j+="<li class='"+k+" "+selec(dayofSec(g),e)+"'><strong class='aqq-wz-c'>"+(c+1)+"</strong><span><b>"+dayofSec(g)+"</b></span></li>"}else if(c<0){g=new Date(a,b,1,12,0,0);c=g.getTime()+c*24*60*60*1E3;g.setTime(c);j+="<li><strong>"+g.getDate()+"</strong><span><b>&nbsp;</b></li>"}else j+=
c+cld.firstWeek<35?e!=0&&(e+1)%7==0?"<li class='bdright'><strong>"+f++ +"</strong><span><b>&nbsp;</b></span></li>":"<li><strong>"+f++ +"</strong><span><b>&nbsp;</b></span></li>":DayNumOfMonth(a,b)+cld.firstWeek>35?e==41?"<li class='bdbottom bdright'>"+f++ +"</li>":"<li class='bdbottom'>"+f++ +"&</li>":e==41?"<li class='bdbottom bdright'></li>":"<li class='bdbottom'></li>";$(".calendar").html(j)}}
function selec(a,b){var e="";e+=a=="\u5b89\u5168\u671f"?"aqq":a=="\u6392\u5375\u671f"?"plq":"dym";if(b>=35)e+=" bdbottom ";return e}function DayNumOfMonth(a,b){return(new Date(a,b,0)).getDate()}
function dayofSec(a){tianshu=$(".hide").val();Wdate=$(".Wdate").val();var b=$(".Wdate").val().split("-")[0],e=$(".Wdate").val().split("-")[1]-1,c=$(".Wdate").val().split("-")[2];b=new Date(b,e,c,12,0,0);for(e=0;e<100;e++){var f=new Date;c=b.getTime()+e*tianshu*24*60*60*1E3;f.setTime(c);c=temp2(f.getYear())+temp(f.getMonth()+1)+temp(f.getDate());var j=new Date,g=f.getTime()+432E6;j.setTime(g);j=temp2(j.getYear())+temp(j.getMonth()+1)+temp(j.getDate());g=new Date;f=f.getTime()-12096E5;g.setTime(f);
f=new Date;var k=g.getTime()-432E6;f.setTime(k);f=temp2(f.getYear())+temp(f.getMonth()+1)+temp(f.getDate());k=new Date;g=g.getTime()+3456E5;k.setTime(g);g=temp2(k.getYear())+temp(k.getMonth()+1)+temp(k.getDate());var i=new Date;k=b.getTime()+(e*tianshu+parseInt(tianshu))*24*60*60*1E3;i.setTime(k);k=temp2(i.getYear())+temp(i.getMonth()+1)+temp(i.getDate());var o=new Date,l=i.getTime()+432E6;o.setTime(l);o=temp2(o.getYear())+temp(o.getMonth()+1)+temp(o.getDate());l=new Date;i=i.getTime()-12096E5;l.setTime(i);
i=new Date;var h=l.getTime()-432E6;i.setTime(h);i=temp2(i.getYear())+temp(i.getMonth()+1)+temp(i.getDate());h=new Date;l=l.getTime()+3456E5;h.setTime(l);l=temp2(h.getYear())+temp(h.getMonth()+1)+temp(h.getDate());h=new Date;var q=b.getTime()+(e*tianshu+parseInt(tianshu)+parseInt(tianshu))*24*60*60*1E3;h.setTime(q);temp2(h.getYear());temp(h.getMonth()+1);temp(h.getDate());q=new Date;h=h.getTime()-12096E5;q.setTime(h);h=new Date;var n=q.getTime()-432E6;h.setTime(n);h=temp2(h.getYear())+temp(h.getMonth()+
1)+temp(h.getDate());n=new Date;q=q.getTime()+3456E5;n.setTime(q);q=temp2(n.getYear())+temp(n.getMonth()+1)+temp(n.getDate());var m=new Date;n=b.getTime()-(e*tianshu+parseInt(tianshu))*24*60*60*1E3;m.setTime(n);n=temp2(m.getYear())+temp(m.getMonth()+1)+temp(m.getDate());var r=new Date,p=m.getTime()+432E6;r.setTime(p);r=temp2(r.getYear())+temp(r.getMonth()+1)+temp(r.getDate());p=new Date;m=m.getTime()-12096E5;p.setTime(m);m=new Date;var s=p.getTime()-432E6;m.setTime(s);m=temp2(m.getYear())+temp(m.getMonth()+
1)+temp(m.getDate());s=new Date;p=p.getTime()+3456E5;s.setTime(p);p=temp2(s.getYear())+temp(s.getMonth()+1)+temp(s.getDate());if(c<=a&&a<j)return"\u6708\u7ecf\u671f";if(k<=a&&a<o)return"\u6708\u7ecf\u671f";if(n<=a&&a<r)return"\u6708\u7ecf\u671f";if(i<=a&&a<=l)return"\u6392\u5375\u671f";if(f<=a&&a<=g)return"\u6392\u5375\u671f";if(h<=a&&a<=q)return"\u6392\u5375\u671f";if(m<=a&&a<=p)return"\u6392\u5375\u671f";if(g<a&&a<c)return"\u5b89\u5168\u671f";if(p<=a&&a<n)return"\u5b89\u5168\u671f";if(r<=a&&a<h)return"\u5b89\u5168\u671f";
if(j<=a&&a<i)return"\u5b89\u5168\u671f";if(i<a&&a<k)return"\u5b89\u5168\u671f"}};
